# AI Edit Feature - User Guide

## Overview

The AI Edit feature allows you to regenerate individual components of AI-generated posts without regenerating the entire post. This provides granular control over your content while maintaining consistency with the original generation context.

## Accessing AI Edit

The AI Edit feature is available in two locations:

1. **Generated Posts Tab**: Click the "AI Edit" button next to any published post
2. **Pending Review Tab**: Click the "AI Edit" button next to any draft post

## Using the Modal

When you click "AI Edit", a modal window will open showing:

### Generation Context
- **Template**: The template used to generate the post
- **Author**: The author associated with the post (if applicable)
- **Topic**: The topic used for generation (if applicable)

### Editable Components

Each component section includes:
- Current content
- "Re-generate" button to create new AI-generated content
- Text input/textarea for manual editing

#### Available Components:
1. **Title** - The post title
2. **Excerpt** - The post excerpt/summary
3. **Content** - The full post content (supports article structures)
4. **Featured Image** - The post's featured image

## Regenerating Components

To regenerate a component:

1. Click the "Re-generate" button next to the component
2. Wait for the AI to generate new content (indicated by a spinning icon)
3. Review the generated content
4. Repeat if needed (you can regenerate multiple times)

**Note**: All regenerations use the original template, author, and topic to maintain consistency.

## Manual Editing

You can also manually edit any component directly in the input fields:
- Changes are tracked automatically
- Modified components are marked with a blue border and asterisk (*)

## Saving Changes

1. Review all your changes (modified components are marked)
2. Click "Save Changes" button at the bottom
3. The modal will close and the page will refresh with your updates

**Keyboard Shortcut**: Press `Ctrl+S` (Windows/Linux) or `Cmd+S` (Mac) to save

## Canceling

To cancel without saving:
1. Click the "Cancel" button or X icon
2. If you have unsaved changes, you'll be prompted to confirm

**Keyboard Shortcut**: Press `ESC` to close the modal

## Performance Notes

- **Title regeneration**: ~3 seconds
- **Excerpt regeneration**: ~5 seconds  
- **Content regeneration**: ~10 seconds
- **Image regeneration**: ~15 seconds

Actual times may vary based on:
- AI Engine settings
- Template complexity
- Article structure usage
- Image generation provider

## Limitations

- Only components from the original generation context can be regenerated
- Requires the original template and generation data to be available
- Cannot change the template, author, or topic (use full regeneration for that)

## Troubleshooting

**"Failed to load post components"**
- Ensure the post was generated by the AI Post Scheduler
- Check that the generation history record still exists

**"Failed to regenerate component"**
- Verify AI Engine is active and configured
- Check that you have sufficient API quota/credits
- Review the generation history for error details

**"Permission denied"**
- Ensure you have the `edit_posts` capability
- For specific posts, ensure you can edit that post

## Best Practices

1. **Regenerate in Order**: Start with title, then excerpt, then content for best context flow
2. **Multiple Attempts**: Don't hesitate to regenerate if the first result isn't perfect
3. **Manual Touch-ups**: Combine AI regeneration with manual editing for best results
4. **Save Frequently**: Changes are only saved when you click "Save Changes"
5. **Preview First**: Use the "View" link on the post to preview before publishing

## Technical Details

### Security
- All requests use WordPress nonces for CSRF protection
- Capability checks enforce `edit_posts` permission
- Input is sanitized using WordPress sanitization functions
- XSS prevention via proper escaping

### Change Tracking
- Original values are stored on modal load
- Changes are tracked in real-time as you edit
- Visual indicators show which components have been modified
- Only modified components are included in save request

### AJAX Endpoints
- `aips_get_post_components` - Fetches post data and context
- `aips_regenerate_component` - Regenerates a single component
- `aips_save_post_components` - Saves all modified components

## Developer Hooks

The AI Edit feature currently leverages the plugin's global `aips_*` events
(such as post generation and schedule execution actions) documented in the
main plugin developer documentation. At this time, there are no additional
AI-Edit-specific WordPress actions or filters. Future versions may introduce
dedicated hooks for this feature, and they will be documented here when
available.

## Support

For issues or questions:
1. Check the plugin's generation history logs
2. Review WordPress debug logs
3. Contact your site administrator
4. Report issues on the plugin's support forum

---

**Last Updated**: 2026-02-09  
**Feature Version**: 2.0.0
