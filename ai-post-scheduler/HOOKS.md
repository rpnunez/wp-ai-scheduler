# AI Post Scheduler Hooks Documentation

This document lists all the actions and filters available in the AI Post Scheduler plugin. Developers can use these hooks to extend the plugin's functionality.

## Action Hooks

### Post Generation

#### `aips_post_generation_started`
Fires when the post generation process begins.

*   **Arguments:**
    *   `int $template_id`: The ID of the template being used.
    *   `string $topic`: The topic of the post (if applicable).

#### `aips_post_generation_failed`
Fires when the post generation process fails.

*   **Arguments:**
    *   `int $template_id`: The ID of the template being used.
    *   `string $error_message`: The error message describing the failure.
    *   `string $topic`: The topic of the post (if applicable).

#### `aips_post_generated`
Fires after a post has been successfully generated and saved.

*   **Arguments:**
    *   `int $post_id`: The ID of the newly created WordPress post.
    *   `object $template`: The template object used for generation.
    *   `int $history_id`: The ID of the history record associated with this generation.

### Schedule Execution

#### `aips_schedule_execution_started`
Fires when a specific schedule item begins execution.

*   **Arguments:**
    *   `int $schedule_id`: The ID of the schedule being executed.

#### `aips_schedule_execution_failed`
Fires when a schedule item fails to execute.

*   **Arguments:**
    *   `int $schedule_id`: The ID of the schedule.
    *   `string $error_message`: The error message.

#### `aips_schedule_execution_completed`
Fires when a schedule item is successfully executed.

*   **Arguments:**
    *   `int $schedule_id`: The ID of the schedule.
    *   `int $result`: The result of the execution (post ID).

### Research & Trending Topics

#### `aips_trending_topic_scheduled`
Fires when a trending topic is converted into a schedule.

*   **Arguments:**
    *   `int $schedule_id`: The ID of the newly created schedule.
    *   `string $topic`: The topic text.
    *   `int $template_id`: The ID of the template assigned to the schedule.

#### `aips_scheduled_research_completed`
Fires when the automated research background process completes.

*   **Arguments:**
    *   `string $niche`: The niche that was researched.
    *   `int $saved_count`: The number of new topics saved.
    *   `array $topics`: The array of raw topic data retrieved.

### Planner

#### `aips_planner_topics_generated`
Fires after topics have been successfully generated by AI in the Planner.

*   **Arguments:**
    *   `array $topics`: Array of generated topic strings.
    *   `string $niche`: The niche/topic prompt used for generation.

#### `aips_planner_bulk_scheduled`
Fires after a bulk scheduling operation in the Planner is completed.

*   **Arguments:**
    *   `int $count`: The number of items scheduled.
    *   `int $template_id`: The ID of the template used.

### Article Structures

#### `aips_structure_created`
Fires after a new article structure is created.

*   **Arguments:**
    *   `int $id`: The ID of the new structure.
    *   `string $structure_data`: JSON encoded structure data.

#### `aips_structure_updated`
Fires after an article structure is updated.

*   **Arguments:**
    *   `int $structure_id`: The ID of the updated structure.
    *   `string $structure_data`: JSON encoded structure data.

#### `aips_structure_deleted`
Fires after an article structure is deleted.

*   **Arguments:**
    *   `int $structure_id`: The ID of the deleted structure.

### Prompt Builder

#### `aips_before_build_content_prompt`
Fires immediately before the content prompt is constructed.

*   **Arguments:**
    *   `object $template`: The template object.
    *   `string $topic`: The topic being processed.

---

## Filter Hooks

### Prompt Builder

#### `aips_content_prompt`
Filters the final content prompt before it is sent to the AI service.

*   **Arguments:**
    *   `string $content_prompt`: The constructed prompt string.
    *   `object $template`: The template object.
    *   `string $topic`: The topic being processed.

---

## Deprecated/Removed Hooks

The following hooks have been removed or deprecated in recent versions:

*   `aips_post_generation_completed` (Removed in v1.7.0) - Use `aips_post_generated` instead.
