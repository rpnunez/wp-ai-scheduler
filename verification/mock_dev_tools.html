<!DOCTYPE html>
<html>
<head>
    <title>Mock Dev Tools</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        /* Minimal WP Admin Styles */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif; background: #f1f1f1; padding: 20px; }
        .wrap { max-width: 1200px; margin: 0 auto; }
        h1 { font-size: 23px; font-weight: 400; padding: 9px 0 4px 0; line-height: 1.3; }
        .card { background: #fff; border: 1px solid #ccd0d4; box-shadow: 0 1px 1px rgba(0,0,0,.04); padding: 0 20px 20px; margin-top: 20px; max-width: 100%; }
        .form-table { border-collapse: collapse; margin-top: 0; width: 100%; }
        .form-table th { vertical-align: top; text-align: left; padding: 20px 10px 20px 0; width: 200px; line-height: 1.3; font-weight: 600; }
        .form-table td { margin-bottom: 9px; padding: 15px 10px; line-height: 1.3; vertical-align: middle; }
        .regular-text { width: 25em; }
        input[type=text] { padding: 0 8px; line-height: 2; min-height: 30px; box-shadow: 0 0 0 transparent; border-radius: 4px; border: 1px solid #8c8f94; background-color: #fff; color: #2c3338; }
        .button { display: inline-block; text-decoration: none; font-size: 13px; line-height: 2.15384615; min-height: 30px; margin: 0; padding: 0 10px; cursor: pointer; border-width: 1px; border-style: solid; -webkit-appearance: none; border-radius: 3px; white-space: nowrap; box-sizing: border-box; }
        .button-primary { background: #2271b1; border-color: #2271b1; color: #fff; }
        .notice { background: #fff; border: 1px solid #c3c4c7; border-left-width: 4px; box-shadow: 0 1px 1px rgba(0,0,0,.04); margin: 5px 15px 2px; padding: 1px 12px; }
        .notice-success { border-left-color: #00a32a; }
        .notice-error { border-left-color: #d63638; }
        .spinner { background: url(images/spinner.gif) no-repeat; background-size: 20px 20px; display: inline-block; visibility: hidden; float: none; vertical-align: middle; opacity: .7; width: 20px; height: 20px; margin: 4px 10px 0; }
        .spinner.is-active { visibility: visible; }
    </style>
</head>
<body>
    <!-- Template Content -->
    <div class="wrap">
        <h1>Developer Tools</h1>
        <p>Use these tools to generate test data and template scaffolds using AI.</p>

        <div class="card">
            <h2>Generate Template Scaffold</h2>
            <p class="description">Create a complete template setup (Voice, Structure, Template) based on a topic.</p>

            <form id="aips-dev-scaffold-form">
                <table class="form-table">
                    <tr>
                        <th scope="row">
                            <label for="topic">Topic / Niche</label>
                        </th>
                        <td>
                            <input type="text" id="topic" name="topic" class="regular-text" placeholder="e.g. Urban Gardening, SaaS Marketing" required>
                            <p class="description">The main topic to base the prompts and structure on.</p>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Options</th>
                        <td>
                            <fieldset>
                                <label for="include_voice">
                                    <input type="checkbox" id="include_voice" name="include_voice" value="true">
                                    Generate Voice/Persona
                                </label><br>

                                <label for="include_structure">
                                    <input type="checkbox" id="include_structure" name="include_structure" value="true">
                                    Generate Article Structure
                                </label><br>

                                <label for="include_title_prompt">
                                    <input type="checkbox" id="include_title_prompt" name="include_title_prompt" value="true" checked>
                                    Include Title Prompt
                                </label><br>

                                <label for="include_content_prompt">
                                    <input type="checkbox" id="include_content_prompt" name="include_content_prompt" value="true" checked>
                                    Include Content Prompt
                                </label><br>

                                <label for="include_image_prompt">
                                    <input type="checkbox" id="include_image_prompt" name="include_image_prompt" value="true" checked>
                                    Include Image Prompt
                                </label><br>

                                <label for="include_ai_variables">
                                    <input type="checkbox" id="include_ai_variables" name="include_ai_variables" value="true">
                                    Use AI Variables {{Variable}}
                                </label>
                            </fieldset>
                        </td>
                    </tr>
                </table>

                <p class="submit">
                    <button type="submit" class="button button-primary" id="aips-generate-scaffold-btn">
                        Generate Scaffold
                    </button>
                    <span class="spinner"></span>
                </p>
            </form>
        </div>

        <div id="aips-dev-output" class="notice notice-success is-dismissible" style="display:none; margin-top: 20px;">
            <p id="aips-dev-output-message"></p>
            <ul id="aips-dev-output-list"></ul>
        </div>

        <div id="aips-dev-error" class="notice notice-error is-dismissible" style="display:none; margin-top: 20px;">
            <p id="aips-dev-error-message"></p>
        </div>
    </div>

    <!-- Mock Variables -->
    <script>
        var aipsAjax = {
            ajaxUrl: '/mock-ajax',
            nonce: 'mock_nonce'
        };
    </script>

    <!-- Admin Dev Tools JS -->
    <script>
        // Paste the JS content here
        (function($) {
            'use strict';

            $(document).ready(function() {
                $('#aips-dev-scaffold-form').on('submit', function(e) {
                    e.preventDefault();

                    var $form = $(this);
                    var $btn = $('#aips-generate-scaffold-btn');
                    var $spinner = $form.find('.spinner');
                    var $output = $('#aips-dev-output');
                    var $error = $('#aips-dev-error');

                    // Clear previous results
                    $output.hide().find('#aips-dev-output-list').empty();
                    $error.hide();

                    // Validate
                    var topic = $('#topic').val().trim();
                    if (!topic) {
                        alert('Please enter a topic.');
                        return;
                    }

                    $btn.prop('disabled', true);
                    $spinner.addClass('is-active');

                    var formData = $form.serialize();
                    formData += '&action=aips_generate_scaffold&nonce=' + aipsAjax.nonce;

                    // MOCK AJAX for Verification
                    // $.post(aipsAjax.ajaxUrl, formData, function(response) { ... });

                    // Simulate Delay and Success
                    setTimeout(function() {
                        var response = {
                            success: true,
                            data: {
                                message: 'Scaffold generated successfully!',
                                items: [
                                    'Voice created: Gardening Expert',
                                    'Template created: Urban Gardening Basics'
                                ]
                            }
                        };

                        // Handler logic copied from actual file
                        if (response.success) {
                            $('#aips-dev-output-message').text(response.data.message);

                            var listHtml = '';
                            if (response.data.items && response.data.items.length) {
                                $.each(response.data.items, function(i, item) {
                                    listHtml += '<li>' + item + '</li>';
                                });
                            }
                            $('#aips-dev-output-list').html(listHtml);
                            $output.fadeIn();
                        } else {
                            $('#aips-dev-error-message').text(response.data.message);
                            $error.fadeIn();
                        }

                        $btn.prop('disabled', false);
                        $spinner.removeClass('is-active');

                    }, 1000);
                });
            });

        })(jQuery);
    </script>
</body>
</html>
